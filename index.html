<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>APPpresupuestos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; }
        .hidden { display: none !important; }
        .tab-active { border-bottom: 4px solid #2563eb; color: #2563eb; font-weight: 800; }
        .glass-header { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid #e2e8f0; }
        .btn-plus { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
        button:active { transform: scale(0.95); }
    </style>
</head>
<body class="antialiased text-slate-900">

    <div id="pantalla-clientes" class="max-w-md mx-auto min-h-screen">
        <header class="p-6 glass-header sticky top-0 z-20 flex justify-between items-center">
            <div>
                <h1 class="text-[10px] font-extrabold tracking-[0.2em] text-blue-600 uppercase mb-1">Panel</h1>
                <h2 class="text-2xl font-extrabold tracking-tight">APP<span class="text-blue-600">presupuestos</span></h2>
            </div>
            <button onclick="nuevoCliente()" class="btn-plus text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg text-3xl font-bold">+</button>
        </header>
        <div id="lista-clientes" class="p-6"></div>
    </div>

    <div id="pantalla-expediente" class="max-w-md mx-auto min-h-screen hidden">
        <nav class="p-6 glass-header sticky top-0 z-20 flex items-center">
            <button onclick="irAPantalla('clientes')" class="bg-white border w-10 h-10 rounded-xl flex items-center justify-center mr-4 shadow-sm font-bold text-xl">â†</button>
            <div id="titulo-cliente" class="flex-1"></div>
        </nav>
        <div class="p-6">
            <button onclick="iniciarNuevaMedicion()" class="w-full btn-plus text-white py-4 rounded-2xl font-extrabold uppercase mb-8 shadow-xl">+ Nueva Obra</button>
            <div id="archivo-presupuestos" class="space-y-4"></div>
        </div>
    </div>

    <div id="pantalla-trabajo" class="max-w-md mx-auto min-h-screen hidden">
        <header class="p-4 bg-white border-b flex justify-between items-center sticky top-0 z-20">
            <button onclick="irAPantalla('expediente')" class="text-slate-400 font-bold p-2 text-xl">âœ•</button>
            <div id="num-presu-header" class="font-black text-sm text-blue-600 uppercase tracking-widest">OBRA</div>
            <button onclick="guardarTodo()" class="bg-emerald-500 text-white px-6 py-2 rounded-xl font-bold text-xs uppercase tracking-wider">Guardar</button>
        </header>
        
        <div class="flex bg-white border-b sticky top-[61px] z-20">
            <button id="tab-tecnico" onclick="cambiarVista('tecnico')" class="tab-btn flex-1 py-4 text-xs font-black uppercase tab-active">Mediciones</button>
            <button id="tab-economico" onclick="cambiarVista('economico')" class="tab-btn flex-1 py-4 text-xs font-black uppercase">Presupuesto</button>
        </div>

        <div id="vista-tecnico" class="p-6 vista-trabajo">
            <h3 class="text-[10px] font-black text-slate-400 uppercase mb-4 tracking-widest italic">Mano de Obra</h3>
            <div class="grid grid-cols-2 gap-3 mb-8">
                <button onclick="abrirPrompt('tabiques')" class="bg-white p-4 rounded-2xl border text-xs font-bold text-left shadow-sm">ğŸ§± Tabiques</button>
                <button onclick="abrirPrompt('techos')" class="bg-white p-4 rounded-2xl border text-xs font-bold text-left shadow-sm">ğŸ  Techos</button>
                <button onclick="abrirPrompt('cajones')" class="bg-white p-4 rounded-2xl border text-xs font-bold text-left shadow-sm">ğŸ“¦ Cajones</button>
                <button onclick="abrirPrompt('tabicas')" class="bg-white p-4 rounded-2xl border text-xs font-bold text-left shadow-sm">ğŸ“ Tabicas</button>
                <button onclick="abrirPrompt('cantoneras')" class="bg-white p-4 rounded-2xl border text-xs font-bold text-left shadow-sm">ğŸ“ Cantoneras</button>
                <button onclick="abrirPrompt('horas')" class="bg-white p-4 rounded-2xl border text-xs font-bold text-left shadow-sm">â±ï¸ Horas</button>
            </div>

            <h3 class="text-[10px] font-black text-blue-500 uppercase mb-4 tracking-widest italic">Materiales</h3>
            <div class="grid grid-cols-2 gap-3 mb-8">
                <button onclick="abrirPrompt('placa13')" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-xs font-bold text-left shadow-sm">ğŸ“„ Placa 13</button>
                <button onclick="abrirPrompt('montante48')" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-xs font-bold text-left shadow-sm">ğŸ—ï¸ Mont. 48</button>
                <button onclick="abrirPrompt('montante70')" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-xs font-bold text-left shadow-sm">ğŸ—ï¸ Mont. 70</button>
                <button onclick="abrirPrompt('canal48')" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-xs font-bold text-left shadow-sm">ğŸ›¤ï¸ Canal 48</button>
                <button onclick="abrirPrompt('canal70')" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-xs font-bold text-left shadow-sm">ğŸ›¤ï¸ Canal 70</button>
                <button onclick="abrirPrompt('tc48')" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-xs font-bold text-left shadow-sm">ğŸ“ TC 48</button>
            </div>
            <div id="resumen-medidas-pantalla"></div>
        </div>

        <div id="vista-economico" class="p-6 hidden vista-trabajo">
            <div id="desglose-precios" class="space-y-3 bg-white p-4 rounded-3xl border shadow-sm"></div>
            <div class="mt-6 pt-6 border-t-2 border-dashed flex justify-between items-center">
                <span class="font-extrabold text-slate-400 text-[10px] uppercase">TOTAL + IVA</span>
                <span id="total-final" class="text-3xl font-black text-blue-600 tracking-tighter">0.00â‚¬</span>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
